<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>GStreamer 사용하기 [1] - 파이프라인 구성요소 및 개념 | Devlog</title><meta name=keywords content="gstreamer,multimedia,c/c++"><meta name=description content="최근에 멀티미디어 관련 프로젝트를 진행하면서 GStreamer를 사용할 일이 생겼다. 간단하게 사용하기에는 알아야할 것들이나 개념들이 꽤나 많기 때문에 GStreamer를 사용하면서 정리한 내용들 및 추가적으로 학습한 내용들을 포스팅할 예정이다.
GStreamer gstreamer overview Gstreamer는 스트리밍 미디어 어플리케이션 생성을 위한 통합 미디어 프레임워크로, 수많은 모듈형식으로 구성된 멀티미디어 프레임워크이다. 주로 오디오, 비디오 스트림등 다양한 데이터 프로토콜의 흐름을 설계할 수 있도록 도와준다. 예를들어 어떤 영상 파일을 rtsp클라이언트를(ex. VLC)이용해서 접근할 수 있도록 rtp 데이터 스트림을 생성하는 rtsp서버를 간단하게 구현할 수 있게 해준다."><meta name=author content="ralpioxxcs"><link rel=canonical href=https://ralpioxxcs.github.io/post/gstreamer/0_gst/><link crossorigin=anonymous href=/assets/css/stylesheet.08a5f35ab5268c046cc88caf6d08ea3d46d4e46a847fb4bd272b6b5e063803a7.css integrity="sha256-CKXzWrUmjARsyIyvbQjqPUbU5GqEf7S9JytrXgY4A6c=" rel="preload stylesheet" as=style><link rel=icon href=https://ralpioxxcs.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://ralpioxxcs.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://ralpioxxcs.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://ralpioxxcs.github.io/apple-touch-icon.png><link rel=mask-icon href=https://ralpioxxcs.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=stylesheet href=/prism-themes/prism.css><link rel=stylesheet href=/prism-themes/prism-nord.css><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-189380926-2","auto"),ga("send","pageview"))</script><meta property="og:title" content="GStreamer 사용하기 [1] - 파이프라인 구성요소 및 개념"><meta property="og:description" content="최근에 멀티미디어 관련 프로젝트를 진행하면서 GStreamer를 사용할 일이 생겼다. 간단하게 사용하기에는 알아야할 것들이나 개념들이 꽤나 많기 때문에 GStreamer를 사용하면서 정리한 내용들 및 추가적으로 학습한 내용들을 포스팅할 예정이다.
GStreamer gstreamer overview Gstreamer는 스트리밍 미디어 어플리케이션 생성을 위한 통합 미디어 프레임워크로, 수많은 모듈형식으로 구성된 멀티미디어 프레임워크이다. 주로 오디오, 비디오 스트림등 다양한 데이터 프로토콜의 흐름을 설계할 수 있도록 도와준다. 예를들어 어떤 영상 파일을 rtsp클라이언트를(ex. VLC)이용해서 접근할 수 있도록 rtp 데이터 스트림을 생성하는 rtsp서버를 간단하게 구현할 수 있게 해준다."><meta property="og:type" content="article"><meta property="og:url" content="https://ralpioxxcs.github.io/post/gstreamer/0_gst/"><meta property="article:section" content="post"><meta property="article:published_time" content="2022-11-02T22:15:21+09:00"><meta property="article:modified_time" content="2022-11-02T22:15:21+09:00"><meta property="og:site_name" content="Devlog"><meta name=twitter:card content="summary"><meta name=twitter:title content="GStreamer 사용하기 [1] - 파이프라인 구성요소 및 개념"><meta name=twitter:description content="최근에 멀티미디어 관련 프로젝트를 진행하면서 GStreamer를 사용할 일이 생겼다. 간단하게 사용하기에는 알아야할 것들이나 개념들이 꽤나 많기 때문에 GStreamer를 사용하면서 정리한 내용들 및 추가적으로 학습한 내용들을 포스팅할 예정이다.
GStreamer gstreamer overview Gstreamer는 스트리밍 미디어 어플리케이션 생성을 위한 통합 미디어 프레임워크로, 수많은 모듈형식으로 구성된 멀티미디어 프레임워크이다. 주로 오디오, 비디오 스트림등 다양한 데이터 프로토콜의 흐름을 설계할 수 있도록 도와준다. 예를들어 어떤 영상 파일을 rtsp클라이언트를(ex. VLC)이용해서 접근할 수 있도록 rtp 데이터 스트림을 생성하는 rtsp서버를 간단하게 구현할 수 있게 해준다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Post","item":"https://ralpioxxcs.github.io/post/"},{"@type":"ListItem","position":2,"name":"GStreamer 사용하기 [1] - 파이프라인 구성요소 및 개념","item":"https://ralpioxxcs.github.io/post/gstreamer/0_gst/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"GStreamer 사용하기 [1] - 파이프라인 구성요소 및 개념","name":"GStreamer 사용하기 [1] - 파이프라인 구성요소 및 개념","description":"최근에 멀티미디어 관련 프로젝트를 진행하면서 GStreamer를 사용할 일이 생겼다. 간단하게 사용하기에는 알아야할 것들이나 개념들이 꽤나 많기 때문에 GStreamer를 사용하면서 정리한 내용들 및 추가적으로 학습한 내용들을 포스팅할 예정이다.\nGStreamer gstreamer overview Gstreamer는 스트리밍 미디어 어플리케이션 생성을 위한 통합 미디어 프레임워크로, 수많은 모듈형식으로 구성된 멀티미디어 프레임워크이다. 주로 오디오, 비디오 스트림등 다양한 데이터 프로토콜의 흐름을 설계할 수 있도록 도와준다. 예를들어 어떤 영상 파일을 rtsp클라이언트를(ex. VLC)이용해서 접근할 수 있도록 rtp 데이터 스트림을 생성하는 rtsp서버를 간단하게 구현할 수 있게 해준다.","keywords":["gstreamer","multimedia","c/c++"],"articleBody":" 최근에 멀티미디어 관련 프로젝트를 진행하면서 GStreamer를 사용할 일이 생겼다. 간단하게 사용하기에는 알아야할 것들이나 개념들이 꽤나 많기 때문에 GStreamer를 사용하면서 정리한 내용들 및 추가적으로 학습한 내용들을 포스팅할 예정이다.\nGStreamer gstreamer overview Gstreamer는 스트리밍 미디어 어플리케이션 생성을 위한 통합 미디어 프레임워크로, 수많은 모듈형식으로 구성된 멀티미디어 프레임워크이다. 주로 오디오, 비디오 스트림등 다양한 데이터 프로토콜의 흐름을 설계할 수 있도록 도와준다. 예를들어 어떤 영상 파일을 rtsp클라이언트를(ex. VLC)이용해서 접근할 수 있도록 rtp 데이터 스트림을 생성하는 rtsp서버를 간단하게 구현할 수 있게 해준다.\nsource codecs formats fileters sinks FFmpeg와의 차이점 둘 다 멀티미디어 스트림을 처리하는 오픈소스 라이브러리로 차이점이 있다기보단 각 프레임워크가 가진 장점들이 있다. FFmpeg는 광범위한 수많은 코덱을 지원하고 다양한 기능을 제공하는 강력한 CLI도구가 있다. GStreamer는 프레임워크 아키텍처가 직관적이고 문서화가 잘되어있어 쉽게 멀티미디어 어플리케이션을 만들 수 있다는 장점이 있다. 실제로 영상 파일을 트랜스코딩을 할 일이 있을때는 FFmpeg CLI를 자주 사용하기도 한다.\n개인적으로 트랜스코딩 및 각종 필터를 통한 후처리등 간단한 작업이 필요할 때 명령어 도구로 사용할 때 적합한 것 같고, 특정 미디어 어플리케이션 형태를 만들어야 할 때는 GStreamer 프레임워크가 사용하기에 더 편리한것 같다고 생각한다.\n설치 방법 우분투 환경을 사용한다면 aptitude 패키지 매니저를 이용하여 설치하면 간단하다. 아래 명령어는 core 라이브러리, 각종 기본 플러그인들을 설치한다.\n$ sudo apt install \\ libgstreamer1.0-dev \\ libgstreamer-plugins-base1.0-dev \\ libgstreamer-plugins-bad1.0-dev \\ gstreamer1.0-plugins-base \\ gstreamer1.0-plugins-good \\ gstreamer1.0-plugins-bad \\ gstreamer1.0-plugins-ugly \\ gstreamer1.0-libav \\ gstreamer1.0-doc \\ gstreamer1.0-tools \\ gstreamer1.0-x \\ gstreamer1.0-alsa \\ gstreamer1.0-gl \\ gstreamer1.0-gtk3 \\ gstreamer1.0-qt5 \\ gstreamer1.0-pulseaudio 잘 살펴보면 플러그인 라이브러리 이름이 base, good, bad, ugly로 되어있는걸 볼 수 있는데, Gstreamer에선 아래와 같이 정의하고 있다.\ngst-plugins-base: 핵심 플러그인 집합 gst-plugins-good: LGPL을 준수하는 양질의 플러그인 집합 gst-plugins-ugly: 배포문제를 일으킬 수도 있는 좋은 플러그인들 (라이선스 등) gst-plugins-bad: 더 높은 퀄리티를 요구하는 플러그인 집합 (문서, 유지보수등이 부실한 경우) gst-libav: libav 래퍼 플러그인 파이프라인 실행 및 예제 gst-launch는 파이프라인을 CLI로 테스트해볼 수 있는 디버깅 유틸리티로, 각 elements들을 느낌표로 구분하여 사용한다.\ngst-launch-1.0 videotestsrc ! autovideosink 커맨드를 실행하면 아래와 같은 colorbar 창이 뜨는것을 확인할 수 있다. source와 sink element만 사용한 간단한 파이프라인으로, videotestsrc는 테스트용 비디오 스트림을 생성해주는 source 플러그인이다. pattern property를 변경하여 패턴을 변경할 수 있다. autovideosink는 display sink의 한 종류로 사용가능한 적합한 video sink를 찾아 자동으로 연결해준다. 예를들어 gtk 인터페이스를 통해 display하고 싶다면 sink부분을 아래와 같이 바꿔준다.\ngst-launch-1.0 videotestsrc ! gtksink 위와 다르게 출력하는 영상은 같지만 gtk 인터페이스로 창을 생성한것을 볼 수 있다.\naudio 소스 추가하기 videotestsrc처럼 오디오도 테스트용 source element가 있다 (audiotestsrc). source를 추가할 때는 느낌표 구분자를 사용하면 구문 오류가 나니 주의한다.\ngst-launch-1.0 \\ videotestsrc ! autovideosink \\ audiotestsrc ! autoaudiosink 위 명령어를 실행하면, 기존의 colorbar창에 삐 소리가 나는것을 확인할 수 있다.\n파이프라인 구성요소 Elements Element는 파이프라인을 구성하는 추상화된 Block형태를 정의한다. 특정 source가 들어오고, 처리되고, 출력(sink)되는 black box같은 개념이라고 생각하면 된다.\nsource 예를들어 위 예제에서 사용한 videotestsrc같은 데이터 스트림을 생성하는 element는 1개의 src만 가지고 있는 반면에, 1개의 스트림을 N개의 source로 demulptimex하는 demuxer같은 element는 여러개의 source를 갖는다. demuxer Pads 각 elements를 연결하는 src와 sink를 GStreamer에서는 Pad라고 정의한다. Plug, Port같은 외부 인터페이스 개념이라고 생각하면 된다.\n각 Pad는 caps negotitation라고 불리는 과정을 통해 element끼리의 연결을 만든다.\nBins Bin은 elements의 집합인 컨테이너 단위이다. elements들 자체의 서브클래스 개념이며, 어플리케이션의 많은 복잡성을 추상화할 수 있게 한다. 이를테면, bin자체의의 상태를 변경함으로써 모든 elements의 상태를 변경한다. 또한 error, tag, EOS 메시지같은 각각이 포함하는 children으로부터의 메시징 버스를 전달하기도 한다.\nCommunication 어플리케이션과 파이프라인 사이의 데이터교환및 커뮤니케이션을 위한 메커니즘을 제공한다.\nbuffers: 파이프라인의 element들 사이의 스트리밍 데이터를 나아가게하는 객체이다. buffers는 항상 source → sink 방향으로 이동한다. (upstream → downstream) events: elements혹은 어플리케이션에서 elemets 사이의 전달된 객체이다. events는 upstream → downstream 방향으로 이동하고, downstream event는 데이터 흐름에 동기화될 수 있다. messageses: 파이프라인 메시징 버스에 의해 posted된 객체이다. 스트리밍 스레드 컨텍스트로부터 동기적으로 가로채질 수 있다. 하지만 주로 어플리케이션의 메인스레드로부터 어플리케이션에 의해 비동기적으로 다루어진다. error, tag, state change, buffering, redirecte 같은 정보를 전송하는데 사용된다. querires: 구간,재생위치같은 정보를 요청한다. 쿼리는 항상 동기적으로 응답된다. peer elements로부터 정보를 요청하기 위해 queries를 사용할 수도 있다. (file size 나 duration같은), 파이프라인내에서 둘 다 사용될 수 있지만, 보통은 upstream quires가 일반적이다. References https://gstreamer.freedesktop.org/documentation/application-development/introduction/gstreamer.html?gi-language=c ","wordCount":"621","inLanguage":"en","datePublished":"2022-11-02T22:15:21+09:00","dateModified":"2022-11-02T22:15:21+09:00","author":{"@type":"Person","name":"ralpioxxcs"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://ralpioxxcs.github.io/post/gstreamer/0_gst/"},"publisher":{"@type":"Organization","name":"Devlog","logo":{"@type":"ImageObject","url":"https://ralpioxxcs.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://ralpioxxcs.github.io/ accesskey=h title="Devlog (Alt + H)"><img src=https://ralpioxxcs.github.io/apple-touch-icon.png alt=logo aria-label=logo height=22>Devlog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://ralpioxxcs.github.io/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://ralpioxxcs.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://ralpioxxcs.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://ralpioxxcs.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://ralpioxxcs.github.io/post/>Post</a></div><h1 class=post-title>GStreamer 사용하기 [1] - 파이프라인 구성요소 및 개념</h1><div class=post-meta><span title='2022-11-02 22:15:21 +0900 KST'>November 2, 2022</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;621 words&nbsp;·&nbsp;ralpioxxcs&nbsp;|&nbsp;<a href=https://github.com/ralpioxxcs/blog/blob/master/content/post/gstreamer/0_gst.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#ffmpeg와의-차이점>FFmpeg와의 차이점</a></li><li><a href=#설치-방법>설치 방법</a></li><li><a href=#파이프라인-실행-및-예제>파이프라인 실행 및 예제</a><ul><li><a href=#audio-소스-추가하기>audio 소스 추가하기</a></li></ul></li><li><a href=#파이프라인-구성요소>파이프라인 구성요소</a><ul><li><a href=#elements>Elements</a></li><li><a href=#pads>Pads</a></li><li><a href=#bins>Bins</a></li></ul></li><li><a href=#communication>Communication</a></li></ul></nav></div></details></div><div class=post-content><figure class=align-center><img loading=lazy src=/images/gstreamer/gst_logo.png#center width=60%></figure><p>최근에 멀티미디어 관련 프로젝트를 진행하면서 GStreamer를 사용할 일이 생겼다. 간단하게 사용하기에는 알아야할 것들이나 개념들이 꽤나 많기 때문에 GStreamer를 사용하면서 정리한 내용들 및 추가적으로 학습한 내용들을 포스팅할 예정이다.</p><h1 id=gstreamer>GStreamer<a hidden class=anchor aria-hidden=true href=#gstreamer>#</a></h1><p><figure class=align-center><img loading=lazy src=/images/gstreamer/gst_arch.png#center width=80%><figcaption>gstreamer overview</figcaption></figure><a href=https://gstreamer.freedesktop.org/>Gstreamer</a>는 스트리밍 미디어 어플리케이션 생성을 위한 통합 미디어 프레임워크로, 수많은 모듈형식으로 구성된 멀티미디어 프레임워크이다. 주로 오디오, 비디오 스트림등 다양한 데이터 프로토콜의 흐름을 설계할 수 있도록 도와준다. 예를들어 어떤 영상 파일을 rtsp클라이언트를(ex. VLC)이용해서 접근할 수 있도록 <strong>rtp</strong> 데이터 스트림을 생성하는 rtsp서버를 간단하게 구현할 수 있게 해준다.</p><ul><li>source</li><li>codecs</li><li>formats</li><li>fileters</li><li>sinks</li></ul><h2 id=ffmpeg와의-차이점>FFmpeg와의 차이점<a hidden class=anchor aria-hidden=true href=#ffmpeg와의-차이점>#</a></h2><p>둘 다 멀티미디어 스트림을 처리하는 오픈소스 라이브러리로 차이점이 있다기보단 각 프레임워크가 가진 장점들이 있다. <strong>FFmpeg</strong>는 광범위한 수많은 코덱을 지원하고 다양한 기능을 제공하는 강력한 CLI도구가 있다. <strong>GStreamer</strong>는 프레임워크 아키텍처가 직관적이고 문서화가 잘되어있어 쉽게 멀티미디어 어플리케이션을 만들 수 있다는 장점이 있다. 실제로 영상 파일을 트랜스코딩을 할 일이 있을때는 FFmpeg CLI를 자주 사용하기도 한다.</p><p>개인적으로 트랜스코딩 및 각종 필터를 통한 후처리등 간단한 작업이 필요할 때 명령어 도구로 사용할 때 적합한 것 같고, 특정 미디어 어플리케이션 형태를 만들어야 할 때는 <strong>GStreamer</strong> 프레임워크가 사용하기에 더 편리한것 같다고 생각한다.</p><h2 id=설치-방법>설치 방법<a hidden class=anchor aria-hidden=true href=#설치-방법>#</a></h2><p>우분투 환경을 사용한다면 <code>aptitude</code> 패키지 매니저를 이용하여 설치하면 간단하다. 아래 명령어는 core 라이브러리, 각종 기본 플러그인들을 설치한다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ sudo apt install <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    libgstreamer1.0-dev <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    libgstreamer-plugins-base1.0-dev <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    libgstreamer-plugins-bad1.0-dev <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    gstreamer1.0-plugins-base <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    gstreamer1.0-plugins-good <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    gstreamer1.0-plugins-bad <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    gstreamer1.0-plugins-ugly <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    gstreamer1.0-libav <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    gstreamer1.0-doc <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    gstreamer1.0-tools <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    gstreamer1.0-x <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    gstreamer1.0-alsa <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    gstreamer1.0-gl <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    gstreamer1.0-gtk3 <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    gstreamer1.0-qt5 <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    gstreamer1.0-pulseaudio
</span></span></code></pre></div><p>잘 살펴보면 플러그인 라이브러리 이름이 <code>base</code>, <code>good</code>, <code>bad</code>, <code>ugly</code>로 되어있는걸 볼 수 있는데, Gstreamer에선 아래와 같이 정의하고 있다.</p><ul><li><code>gst-plugins-base</code>: 핵심 플러그인 집합</li><li><code>gst-plugins-good</code>: LGPL을 준수하는 양질의 플러그인 집합</li><li><code>gst-plugins-ugly</code>: 배포문제를 일으킬 수도 있는 좋은 플러그인들 (라이선스 등)</li><li><code>gst-plugins-bad</code>: 더 높은 퀄리티를 요구하는 플러그인 집합 (문서, 유지보수등이 부실한 경우)</li><li><code>gst-libav</code>: <code>libav</code> 래퍼 플러그인</li></ul><h2 id=파이프라인-실행-및-예제>파이프라인 실행 및 예제<a hidden class=anchor aria-hidden=true href=#파이프라인-실행-및-예제>#</a></h2><p><code>gst-launch</code>는 파이프라인을 <strong>CLI</strong>로 테스트해볼 수 있는 디버깅 유틸리티로, 각 elements들을 느낌표로 구분하여 사용한다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>gst-launch-1.0 videotestsrc ! autovideosink
</span></span></code></pre></div><p>커맨드를 실행하면 아래와 같은 colorbar 창이 뜨는것을 확인할 수 있다.<figure class=align-center><img loading=lazy src=/images/gstreamer/gst_pipeline.png#center width=40%></figure><strong>source</strong>와 <strong>sink</strong> element만 사용한 간단한 파이프라인으로, <code>videotestsrc</code>는 테스트용 비디오 스트림을 생성해주는 source 플러그인이다. pattern property를 변경하여 패턴을 변경할 수 있다.
<code>autovideosink</code>는 display sink의 한 종류로 사용가능한 적합한 video sink를 찾아 자동으로 연결해준다. 예를들어 <strong>gtk</strong> 인터페이스를 통해 display하고 싶다면 sink부분을 아래와 같이 바꿔준다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>gst-launch-1.0 videotestsrc ! gtksink
</span></span></code></pre></div><p><figure class=align-center><img loading=lazy src=/images/gstreamer/gst_gtksink.png#center width=50%></figure>위와 다르게 출력하는 영상은 같지만 <strong>gtk</strong> 인터페이스로 창을 생성한것을 볼 수 있다.</p><h3 id=audio-소스-추가하기>audio 소스 추가하기<a hidden class=anchor aria-hidden=true href=#audio-소스-추가하기>#</a></h3><p><code>videotestsrc</code>처럼 오디오도 테스트용 source element가 있다 (<code>audiotestsrc</code>). source를 추가할 때는 느낌표 구분자를 사용하면 구문 오류가 나니 주의한다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>gst-launch-1.0 <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    videotestsrc ! autovideosink <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    audiotestsrc ! autoaudiosink
</span></span></code></pre></div><p>위 명령어를 실행하면, 기존의 colorbar창에 삐 소리가 나는것을 확인할 수 있다.</p><h2 id=파이프라인-구성요소>파이프라인 구성요소<a hidden class=anchor aria-hidden=true href=#파이프라인-구성요소>#</a></h2><h3 id=elements>Elements<a hidden class=anchor aria-hidden=true href=#elements>#</a></h3><p>Element는 파이프라인을 구성하는 추상화된 Block형태를 정의한다. 특정 source가 들어오고, 처리되고, 출력(sink)되는 <strong>black box</strong>같은 개념이라고 생각하면 된다.</p><p><figure class=align-center><img loading=lazy src=/images/gstreamer/gst_src_element.png#center width=30%><figcaption>source</figcaption></figure>예를들어 위 예제에서 사용한 <code>videotestsrc</code>같은 데이터 스트림을 생성하는 element는 1개의 <strong>src</strong>만 가지고 있는 반면에, 1개의 스트림을 N개의 source로 demulptimex하는 <code>demuxer</code>같은 element는 여러개의 source를 갖는다.<figure class=align-center><img loading=lazy src=/images/gstreamer/gst_filter_element_multi.png#center width=30%><figcaption>demuxer</figcaption></figure></p><h3 id=pads>Pads<a hidden class=anchor aria-hidden=true href=#pads>#</a></h3><p>각 elements를 연결하는 <strong>src</strong>와 <strong>sink</strong>를 GStreamer에서는 <strong>Pad</strong>라고 정의한다. Plug, Port같은 외부 인터페이스 개념이라고 생각하면 된다.<br>각 Pad는 <code>caps negotitation</code>라고 불리는 과정을 통해 element끼리의 연결을 만든다.</p><h3 id=bins>Bins<a hidden class=anchor aria-hidden=true href=#bins>#</a></h3><p><figure class=align-center><img loading=lazy src=/images/gstreamer/gst_bin.png#center width=80%></figure><strong>Bin</strong>은 elements의 집합인 컨테이너 단위이다. elements들 자체의 서브클래스 개념이며, 어플리케이션의 많은 복잡성을 추상화할 수 있게 한다. 이를테면, bin자체의의 상태를 변경함으로써 모든 elements의 상태를 변경한다. 또한 error, tag, EOS 메시지같은 각각이 포함하는 children으로부터의 메시징 버스를 전달하기도 한다.</p><h2 id=communication>Communication<a hidden class=anchor aria-hidden=true href=#communication>#</a></h2><p>어플리케이션과 파이프라인 사이의 데이터교환및 커뮤니케이션을 위한 메커니즘을 제공한다.</p><ul><li><code>buffers</code>: 파이프라인의 element들 사이의 스트리밍 데이터를 나아가게하는 객체이다. buffers는 항상 source → sink 방향으로 이동한다. (upstream → downstream)</li><li><code>events</code>: elements혹은 어플리케이션에서 elemets 사이의 전달된 객체이다. events는 upstream → downstream 방향으로 이동하고, downstream event는 데이터 흐름에 동기화될 수 있다.</li><li><code>messageses</code>: 파이프라인 메시징 버스에 의해 posted된 객체이다. 스트리밍 스레드 컨텍스트로부터 동기적으로 가로채질 수 있다. 하지만 주로 어플리케이션의 메인스레드로부터 어플리케이션에 의해 비동기적으로 다루어진다. error, tag, state change, buffering, redirecte 같은 정보를 전송하는데 사용된다.</li><li><code>querires</code>: 구간,재생위치같은 정보를 요청한다. 쿼리는 항상 동기적으로 응답된다. peer elements로부터 정보를 요청하기 위해 queries를 사용할 수도 있다. (file size 나 duration같은), 파이프라인내에서 둘 다 사용될 수 있지만, 보통은 upstream quires가 일반적이다.</li></ul><hr><h1 id=references>References<a hidden class=anchor aria-hidden=true href=#references>#</a></h1><ul><li><a href="https://gstreamer.freedesktop.org/documentation/application-development/introduction/gstreamer.html?gi-language=c">https://gstreamer.freedesktop.org/documentation/application-development/introduction/gstreamer.html?gi-language=c</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://ralpioxxcs.github.io/tags/gstreamer/>gstreamer</a></li><li><a href=https://ralpioxxcs.github.io/tags/multimedia/>multimedia</a></li><li><a href=https://ralpioxxcs.github.io/tags/c/c++/>c/c++</a></li></ul><nav class=paginav><a class=next href=https://ralpioxxcs.github.io/post/etc/cross_compilation_arm/><span class=title>Next »</span><br><span>aarch64 크로스 컴파일 환경 구성하기</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share GStreamer 사용하기 [1] - 파이프라인 구성요소 및 개념 on twitter" href="https://twitter.com/intent/tweet/?text=GStreamer%20%ec%82%ac%ec%9a%a9%ed%95%98%ea%b8%b0%20%5b1%5d%20-%20%ed%8c%8c%ec%9d%b4%ed%94%84%eb%9d%bc%ec%9d%b8%20%ea%b5%ac%ec%84%b1%ec%9a%94%ec%86%8c%20%eb%b0%8f%20%ea%b0%9c%eb%85%90&url=https%3a%2f%2fralpioxxcs.github.io%2fpost%2fgstreamer%2f0_gst%2f&hashtags=gstreamer%2cmultimedia%2cc%2fc%2b%2b"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share GStreamer 사용하기 [1] - 파이프라인 구성요소 및 개념 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fralpioxxcs.github.io%2fpost%2fgstreamer%2f0_gst%2f&title=GStreamer%20%ec%82%ac%ec%9a%a9%ed%95%98%ea%b8%b0%20%5b1%5d%20-%20%ed%8c%8c%ec%9d%b4%ed%94%84%eb%9d%bc%ec%9d%b8%20%ea%b5%ac%ec%84%b1%ec%9a%94%ec%86%8c%20%eb%b0%8f%20%ea%b0%9c%eb%85%90&summary=GStreamer%20%ec%82%ac%ec%9a%a9%ed%95%98%ea%b8%b0%20%5b1%5d%20-%20%ed%8c%8c%ec%9d%b4%ed%94%84%eb%9d%bc%ec%9d%b8%20%ea%b5%ac%ec%84%b1%ec%9a%94%ec%86%8c%20%eb%b0%8f%20%ea%b0%9c%eb%85%90&source=https%3a%2f%2fralpioxxcs.github.io%2fpost%2fgstreamer%2f0_gst%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share GStreamer 사용하기 [1] - 파이프라인 구성요소 및 개념 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fralpioxxcs.github.io%2fpost%2fgstreamer%2f0_gst%2f&title=GStreamer%20%ec%82%ac%ec%9a%a9%ed%95%98%ea%b8%b0%20%5b1%5d%20-%20%ed%8c%8c%ec%9d%b4%ed%94%84%eb%9d%bc%ec%9d%b8%20%ea%b5%ac%ec%84%b1%ec%9a%94%ec%86%8c%20%eb%b0%8f%20%ea%b0%9c%eb%85%90"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share GStreamer 사용하기 [1] - 파이프라인 구성요소 및 개념 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fralpioxxcs.github.io%2fpost%2fgstreamer%2f0_gst%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share GStreamer 사용하기 [1] - 파이프라인 구성요소 및 개념 on whatsapp" href="https://api.whatsapp.com/send?text=GStreamer%20%ec%82%ac%ec%9a%a9%ed%95%98%ea%b8%b0%20%5b1%5d%20-%20%ed%8c%8c%ec%9d%b4%ed%94%84%eb%9d%bc%ec%9d%b8%20%ea%b5%ac%ec%84%b1%ec%9a%94%ec%86%8c%20%eb%b0%8f%20%ea%b0%9c%eb%85%90%20-%20https%3a%2f%2fralpioxxcs.github.io%2fpost%2fgstreamer%2f0_gst%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share GStreamer 사용하기 [1] - 파이프라인 구성요소 및 개념 on telegram" href="https://telegram.me/share/url?text=GStreamer%20%ec%82%ac%ec%9a%a9%ed%95%98%ea%b8%b0%20%5b1%5d%20-%20%ed%8c%8c%ec%9d%b4%ed%94%84%eb%9d%bc%ec%9d%b8%20%ea%b5%ac%ec%84%b1%ec%9a%94%ec%86%8c%20%eb%b0%8f%20%ea%b0%9c%eb%85%90&url=https%3a%2f%2fralpioxxcs.github.io%2fpost%2fgstreamer%2f0_gst%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://ralpioxxcs.github.io/>Devlog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script src=/js/prism.js></script>
<script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>